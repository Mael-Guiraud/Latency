%!TEX root = Manuscript.tex

\chapter*{Conclusion}
\label{chap:concl}
\addcontentsline{toc}{chapter}{Conclusion}

In this thesis, we presented the problem of minimizing latency of periodic flows in a switched packet network. Developed networks are based on statistical multiplexing: the links are dimensioned considering the average bit rate of the flows. Statistical multiplexing is a low-cost solution to deploy a network, but it does not ensure the latency of the packets using it. If a burst of data is sent by one flow, shared resources become critical and some packets are buffered while waiting their availability. We talk about contention buffers, that induce additional latency.

We study the Cloud-RAN application case. In C-RAN, radio antennas send periodically packets to datacenters, that compute an answer and send it back to the antennas. The packets must have an end-to-end latency lower than a maximal value, required by the protocols. Statistical multiplexing is not able to ensure an end-to-end latency for packets, and because of contention buffers, the more packet there is in the network, the largest is the latency. Furthermore, C-RAN flows are periodic and a large amount of data is sent each period by the antennas and the datacenters, that worsen the latency of the packets with statistical multiplexing.

Several working groups (DetNet, TSN, see Chapter~\ref{chap:TSN}), developed standards and mechanisms ensuring an upper bound on the latency in packet switched networks. The network devices can reserve a port during a given time to forward the traffic of a given flow without contention buffer. The arrival date of the packets must then be known and precise. To do so, a scheduling of every output port of the devices is computed ahead. Current approaches to compute this scheduling are based on stochastic laws, since most of the internet traffic follows a stochastic behavior. In such a situation, it is impossible to totally get rid of contention buffers. Nevertheless, since our flows are deterministic (the amount of data and the periodicity of the packets remains the same all over the time), we show that deterministic scheduling not only allows to ensure a minimal latency of deterministic flows but also helps to reduce the latency of best-effort flows. 
Furthermore, TSN and DetNet mechanisms induce several sources of additional latency, like guard time around packets to prevent the time shift between clocks or buffering time of the header of the packets in every switch to read the destination. In this thesis, we go further by proposing solutions to reduce the end-to-end latency of packets to its physical transmission time by proposing a new generation of switch that get rid of technical constraints imposed by a statistical vision of the network.



 This thesis focuses on the problem of computing a deterministic scheduling for periodic flows that we show to be $\NP$-hard for arbitrary networks.
 We study in Chapters~\ref{chap:PAZL},\ref{chap:PALL} this problem when the flows are unsynchronized, that is, we can choose the emission date of the packets in the sources of the flows. This case does not perfectly match with Cloud-RAN, but it corresponds to various use cases, like industry 4.0, autonomous vehicle...
In Chapter~\ref{chap:PAZL}, we give several greedy algorithms and one FPT algorithm that allows to reduce the latency to the physical transmission time (i.e. without any buffers) on a kind of common network topology, when the load induced by deterministic traffic is lower than $80\%$. We experimentally show with the FPT algorithm that on really loaded networks (when the load is greater than $80\%$), this is not possible to get rid of contention buffers. 
We then propose solutions that buffer packets in some nodes of the networks, but we ensure that the latency is minimized: We organize the flows such that the latency of the packets are minimized. Remark that in such an approach, the buffers are not anymore a consequence of contention that we cannot control or predict, but a tool to organize the packets.
Chapter~\ref{chap:PALL} study the problem of organizing flows in the same topology as Chapter~\ref{chap:PAZL}, but allowing one buffer on the route for every packet. We propose several greedy algorithms and one FPT algorithm based on a classical scheduling algorithm that we adapted for periodicity. The performances of our algorithm are excellent, we show it is possible to reduce latency to the physical transmission time of the longest route in $99,9\%$ of the cases, while statistical multiplexing, even prioritizing critical flows adds $1/4$ of the period of contention buffers latency to the flows.

We study in Chapter~\ref{chap:SPALL} the C-RAN use case, in which all antennas send their messages at the same date, on arbitrary networks. We propose a canonical form of the problem that simplify it and allows us to use local search heuristics and to propose a branch and bound algorithm able to run for a reasonable number of routes. Then, we experimentally show that our approach drastically over perform statistical multiplexing in terms of latency.

We then show in Chapter~\ref{chap:BE} how to adapt our algorithm to not impact best-effort flows latency while scheduling the C-RAN traffic. We show that, even if our approaches virtually induce an additional use of bandwidth due to resource reservation, we are able to improve the average latency of best-effort traffic while minimizing the C-RAN traffic latency.

\section*{Openness}

We proposed solutions to minimize the end-to-end latency in various use cases: Cloud-RAN, Industry 4.0, motion control, autonomous vehicle, etc... Most of those applications needs a low latency required by protocols. Reducing the transmission latency allows us to give more time to the other components of the chain (datacenters for C-RAN) or to lengthen the physical links, which mean, for C-RAN a wider area of development.
Several questions remains open around our work. Even if we conjecture that \pazl and \pall are $\NP$-hard on star routed networks, we are not able to prove it at the moment. 
The algorithms we developed for \pazl and \pall are designed for star routed networks. Even if several greedy algorithms could be adapted for arbitrary networks, we did not study them in detail. Furthermore, the FPT algorithms are based on the fact there is no or only one buffers in the networks, and are not easily adaptable.

This thesis arises in the context of SDN which aims to develop dynamical and programmable networks. Our algorithms for \pazl and \pall compute the scheduling for all flows, and must reschedule the entire solution if a flow is removed or added to the network. The canonical form of the solutions we presented for \minstra allows us to efficiently add a flow to the best solution, but not to quickly re-compute the best solution when a flow is removed.

The measure we want to minimize is the maximal end-to-end latency of all flows. This often means that the flow using the longest route is never delayed in contention buffer, but the other flows are more or less impacted by the solution we give. One can imagine use-cases in which all flows do not share the same latency constraints, and define another problem in which we try to minimize the latency of all flows independently. We can also expand our model to consider several kinds of flows with each one it's period, size of message and latency constraint. 



